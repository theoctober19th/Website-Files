"use strict";jQuery(document).ready(function(e){var a,t,o=!1;function s(){o=!1,e("#shared-counts-modal-recipient, #shared-counts-modal-name, #shared-counts-modal-email").val(""),e("#shared-counts-modal-wrap").fadeOut(),e("#shared-counts-modal-sent").hide()}e(document).on("click",'.shared-counts-button[target="_blank"]:not(.no-js)',function(a){a.preventDefault();var t="",o=this.href;switch(o.split("/")[2]){case"www.facebook.com":t="width=585,height=368";break;case"twitter.com":t="width=585,height=261";break;case"plus.google.com":t="width=517,height=511";break;case"pinterest.com":t="width=750,height=550";break;default:t="width=585,height=515"}window.open(o,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+t),e(this).trigger("shared-counts-click")}),e(document).on("click",'a[href*="#shared-counts-email"]',function(s){s.preventDefault(),o=!0,e("#shared-counts-modal-wrap").fadeIn(),e("#shared-counts-modal-recipient").focus(),a=e(this).data("postid"),t=e(this).data("nonce"),shared_counts.recaptchaSitekey&&grecaptcha.render("shared-counts-modal-recaptcha",{sitekey:shared_counts.recaptchaSitekey})}),e(document).on("click","#shared-counts-modal-close, #shared-counts-modal-wrap",function(a){("shared-counts-modal-wrap"!==e(this).attr("id")||e(a.target).is("#shared-counts-modal-wrap"))&&(a.preventDefault(),s())}),e(document).keyup(function(e){o&&27===e.keyCode&&s()}),e(document).on("click","#shared-counts-modal-submit",function(o){o.preventDefault();var n=!1,c=e(this),r=e("#shared-counts-modal-recipient"),i=e("#shared-counts-modal-name"),d=e("#shared-counts-modal-email"),l=e("#shared-counts-modal-validation"),h=e("#g-recaptcha-response"),u={action:"shared_counts_email",postid:a,recipient:r.val(),name:i.val(),email:d.val(),validation:l.val(),recaptcha:h.val(),nonce:t};e(r,i,d).each(function(){e(this).val()&&""!==e(this).val()||(n=!0)}),n?alert(shared_counts.email_fields_required):(e(this).prop("disabled",!0),e.post(shared_counts.ajaxurl,u,function(e){e.success&&(console.log(shared_counts.email_sent),s()),c.prop("disabled",!1)}).fail(function(e){console.log(e.responseText)}))})});